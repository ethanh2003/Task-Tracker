<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Tracker</title>
    <link rel="stylesheet" href="./static/main.css">
</head>
<body>
    <div class="top-contain">
        <a href="/logout">
            <button class="top-bar">Log Out</button>
        </a>
        <a href="/task">
            <button class="top-bar">Task</button>
        </a>
        <a href="/ViewUsers">
            <button class="top-bar">User Managment</button>
        </a>
    </div>
    <div class="h">
        <h1>Task Tracker</h1>
    </div>
    <form action="/add" method="post">
        <div class="register-container">
            <h3>Add Task</h3>
            <div class="form-item">
                <label>Task Title:</label>
                <input required type="text" name="title" placeholder="Task">
            </div>
            <div class="form-item">
                <label>Description:</label>
                <input type="text" name="description" placeholder="Description">
            </div>
            <div class="form-item">
                <label>Due:</label>
                <input required type="date" name="due" >
            </div>
            <label>Assigned:</label>
            <select required name="assigned" id="assigned" multiple>
                <option value="All">All User</option>
                {% for user in user_list %}
                <option value="{{user.name}}">{{user.name}}</option>
                {% endfor %}
            </select>
            <button class="submit-button" type="submit">Add</button>
        </div>
    </form>
    <div class="h">
        <h1>My Task</h1>
    </div>
    <div id="todo"class="todo">
        <table>
            <thead>
                <th>Title</th>
                <th>Description</th>
                <th>Due Date</th>
                <th>Assigned To</th>
                <th>Status</th>
                <th></th>
                <th></th>
            </thead>
            <tbody>
                {% for todo in todo_list %}
                <tr>
                    {%if user.name in todo.assigned or todo.assigned=="All"%}
                <td class="title">{{ todo.title }}</td> <td>{{ todo.description }}</td>  <td>{{ todo.due }}</td>  <td>{{ todo.assigned }}</td>
                <td>{% if todo.complete == 0 %}
                <button class="notStarted">Not Started</button>
                {% elif todo.complete == 1 %}
                <button class="inProgress">In Progress</button>
                {% else %}
                <button class="complete">Complete</button>
                {% endif %}</td>
                <td><a href="/update/{{ todo.id }}"><button>Update</button></a></td>
                {%if todo.createdBy == user.id or user.access == 1%}
                <td><a href="/editTask/{{ todo.id }}"><button>Edit</button></a></td>
                <td><a href="/delete/{{ todo.id }}"><button>Delete</button></a></td>
                {%endif%}</tr>

                {% endif %}
                {% endfor %}
            </tbody>
        </table>
    </div>
    {%if user.access==1%}
    <div class="h">
    <h1>All Task</h1>
    </div>
    <div id="todo"class="todo">
        <table>
           <thead>
           <tr>
               <th>Title</th>
               <th>Description</th>
               <th>Due Date</th>
               <th>Assigned To</th>
               <th>Status</th>
               <th></th>
               <th></th>
           </thead>
           </tr>
           <tbody>
       {% for todo in todo_list %}
       <tr>
       <td class="title">{{ todo.title }}</td> <td>{{ todo.description }}</td>  <td>{{ todo.due }}</td>  <td>{{ todo.assigned }}</td>
       <td>{% if todo.complete == 0 %}
       <button class="notStarted">Not Started</button>
       {% elif todo.complete == 1 %}
       <button class="inProgress">In Progress</button>
       {% else %}
       <button class="complete">Complete</button>{% endif %}
       </td>
       <td><a href="/update/{{ todo.id }}"><button>Update</button></a></td>
       {%if todo.createdBy == user.id or user.access == 1%}
       <td><a href="/editTask/{{ todo.id }}"><button>Edit</button></a></td>
       <td><a href="/delete/{{ todo.id }}"><button>Delete</button></a></td>
       {%endif%}</tr>
       
       {% endfor %}
       </tbody>
       </table>
       </div>
    {%endif%}
    
</body>

</html>